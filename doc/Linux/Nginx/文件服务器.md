---
title: 文件服务器
url: https://www.yuque.com/tangsanghegedan/ilyegg/hp0kre
---

```bash
server
{
    listen 80;
	  server_name 124.71.56.21;
     
     
     location /share {
       	add_header Access-Control-Allow-Origin *;
        
		auth_basic "Restricted";		# 输入密码时的提示语
        auth_basic_user_file /usr/local/nginx/pass_file;	# 显示认证时的用户密码文件存放路径
        
        autoindex on;		#开启索引功能(文件目录             
        autoindex_exact_size off;		# 关闭计算文件确切大小（单位bytes），只显示大概大小（单位kb、mb、gb） 
        autoindex_localtime on;		# 显示本机时间而非 GMT 时间   
        charset utf-8; # 避免中文乱码
        
        alias /home/data/file;
     }
     
    access_log  /usr/local/nginx/logs/server_file.log;
    error_log  /usr/local/nginx/logs/server_file.error.log;
}
```

访问<http://124.71.56.21/share>

使用htpasswd命令生成秘钥文件 [在线htpasswd生成器](https://tool.oschina.net/htpasswd)

```bash
# 安装htpasswd
yum -y install httpd-tools

# 生成密码文件
htpasswd -c -d /usr/local/nginx/pass_file admin
New password:
Re-type new password:
Adding password for user admin
```

> **htpasswd命令**是Apache的Web服务器内置工具，用于创建和更新储存用户名、域和用户基本认证的密码文件。
>
> **-c**：创建一个加密文件；
> \-n：不更新加密文件，只将加密后的用户名密码显示在屏幕上；
> \-m：默认采用MD5算法对密码进行加密；
> **-d**：采用CRYPT算法对密码进行加密；
> \-p：不对密码进行进行加密，即明文密码；
> \-s：采用SHA算法对密码进行加密；
> \-b：在命令行中一并输入用户名和密码而不是根据提示输入密码；
> \-D：删除指定的用户。

在/usr/local/nginx/pass\_file文件中就添加了一个用户名为admin的用户
![image.png](..\\..\assets\hp0kre\1621389457699-1324ad3b-04f6-4235-a015-84b679455f93.png)
访问<http://124.71.56.21/share>会弹出用户认证窗口
